# Brand OS v2.0 - Comprehensive Manual ðŸ“˜

**The Operating System for Brand-Aligned AI Creativity**

---

## ðŸš€ Getting Started

### Prerequisites
- Node.js v20+
- Supabase CLI
- Gemini Pro API Key / OpenAI Key

### Installation

```bash
# 1. Clone & Install
git clone https://github.com/nexus-ai/brand-dna.git
cd brand-dna/web
npm install

# 2. Environment Setup
cp .env.example .env.local
# Add keys: VITE_SUPABASE_URL, VITE_SUPABASE_ANON_KEY, GOOGLE_AI_API_KEY

# 3. Run Development Server
npm run dev
```

---

## ðŸ§  Core Systems

### 1. Brand Profile Engine (`/features/doctrine`)
The heart of the system. Unlike meaningful "brand guidelines" PDFs, Brand OS ingests:
- **Visual Doctrine**: Spatial rules (e.g., "Logo must have 20% negative space").
- **Brand Grammar**: Logic gates for AI generation (e.g., "If mood=somber, subtract 15% saturation").
- **Emotional Intent**: Semantic mapping of feelings to visual parameters.

### 2. Multi-Model AI Orchestrator (`services/ai.service.ts`)
We don't rely on a single model. The system routes prompts intelligently:
- **Gemini 3 Pro**: Used for semantic understanding, prompt enrichment, and complex logic.
- **DALL-E 4 / Meta ImageGen**: Used for final asset generation based on the "enriched" prompt.

### 3. Node-Based Creative Canvas (`/features/moodboard`)
A limitless 2D canvas where designers build "creative logic flows".
- **Nodes**: Reference Images, Text Tags, Color Swatches, Logic Gates.
- **Output**: The canvas state is compiled into a "Creative Context" JSON that feeds the AI.

### 4. Deployment Hub (`/features/deployment`)
Enterprise-grade asset pipeline.
- **Approvals**: RLS-protected workflow (Draft -> Pending -> Approved).
- **Integrations**: 
  - **Figma**: Pushes assets directly to team libraries.
  - **Web/CMS**: Updates production websites via webhook.

---

## ðŸŽ¨ Carbon Design System Implementation

Brand OS v2.0 features a complete UI overhaul based on the **Carbon Design System**.

- **Typography**: IBM Plex Sans (Technical, legible).
- **Color**: High-contrast, accessibility-focused semantic tokens (`bg-background`, `text-primary`).
- **Motion**: Physics-based layout transitions using `framer-motion`.
- **Density**: "Compact" mode by default for professional tools.

---

## ðŸ›¡ï¸ Security & Architecture

- **Database**: PostgreSQL on Supabase.
- **Auth**: Row Level Security (RLS) ensures strict data isolation between workspaces.
- **Compliance**: "Leaked Password Protection" enabled for all accounts.

### Directory Structure
- `web/src/features/`: Feature-sliced modules (Dashboard, Studio, etc.)
- `web/src/services/`: Abstracted API layer (AI, DB, Storage)
- `supabase/migrations/`: Truth-source for database schema.

---

## â“ Troubleshooting

**Issue**: "Recursion detected in RLS policy"
**Fix**: We implemented a `security_definer` function `get_my_workspace_ids()` to break the recursion loop in policies.

**Issue**: "AI Generation Failed"
**Fix**: Check `Settings > API Keys` to ensure your Gemini/OpenAI keys are active and have credits.

---

*Generated by Brand OS Engineering Team - February 07, 2026*
